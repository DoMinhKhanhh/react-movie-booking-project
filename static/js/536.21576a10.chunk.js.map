{"version":3,"file":"static/js/536.21576a10.chunk.js","mappings":"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","sources":["pages/Register/index.js"],"sourcesContent":["import React, { useEffect } from \"react\";\n\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as yup from \"yup\";\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport Swal from \"sweetalert2\";\n\nimport { register, resetErrorLoginRegister } from \"../../reducers/actions/Auth\";\nimport logoTix from \"./logo/logoTix.png\";\n\nexport default function Register() {\n  const { responseRegister, loadingRegister, errorRegister } = useSelector(\n    (state) => state.authReducer\n  );\n  let location = useLocation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (responseRegister) {\n      // đăng ký thành công thì đăng nhập, responseRegister để bỏ qua componentditmount\n      Swal.fire({\n        position: \"center\",\n        icon: \"success\",\n        title: \"Bạn đã đăng ký thành công\",\n        showConfirmButton: false,\n        timer: 2000,\n      });\n      history.push(\"/dangnhap\", location.state);\n    }\n  }, [responseRegister]);\n  useEffect(() => {\n    return () => {\n      dispatch(resetErrorLoginRegister());\n    };\n  }, []);\n\n  const phoneRegExp =\n    /^((\\\\+[1-9]{1,4}[ \\\\-]*)|(\\\\([0-9]{2,3}\\\\)[ \\\\-]*)|([0-9]{2,4})[ \\\\-]*)*?[0-9]{3,4}?[ \\\\-]*[0-9]{3,4}?$/;\n  const signupUserSchema = yup.object().shape({\n    taiKhoan: yup.string().required(\"*Tài khoản không được bỏ trống !\"),\n    matKhau: yup.string().required(\"*Mật khẩu không được bỏ trống !\"),\n    email: yup\n      .string()\n      .required(\"*Email không được bỏ trống !\")\n      .email(\"* Email không hợp lệ \"),\n    soDt: yup\n      .string()\n      .required(\"*Số điện thoại không được bỏ trống !\")\n      .matches(phoneRegExp, \"Số điện thoại không hợp lệ!\"),\n    hoTen: yup.string().required(\"*Tên không được bỏ trống !\"),\n  });\n\n  const handleSubmit = (user) => {\n    // trường hợp nào thì cho đăng ký(return true): loadingRegister=false và responseRegister=null\n    console.log(`user`, user);\n    if (!loadingRegister && !responseRegister) {\n      dispatch(register(user));\n    }\n  };\n\n  return (\n    <div className=\"text-light\" style={{ padding: \"20px 32px 30px\" }}>\n      <div className=\"container\">\n        <img\n          src={logoTix}\n          alt=\"logoTix\"\n          style={{\n            width: \"200px\",\n            marginBottom: \"10px\",\n            cursor: \"pointer\",\n            display: \"block\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n          }}\n        />\n        <p style={{ textAlign: \"center\", marginBottom: \"10px\" }}>\n          Đăng Ký để được nhiều ưu đãi, mua vé và bảo mật thông tin!\n        </p>\n      </div>\n      <Formik\n        initialValues={{\n          taiKhoan: \"\",\n          matKhau: \"\",\n          email: \"\",\n          soDt: \"\",\n          maNhom: \"GP09\",\n          maLoaiNguoiDung: \"KhachHang\", // điền QuanTri backend cũng áp dụng KhachHang\n          hoTen: \"\",\n        }}\n        validationSchema={signupUserSchema} // validationSchdema:  thu vien yup nhập sai ko submit được\n        onSubmit={handleSubmit}\n      >\n        {(formikProps) => (\n          <Form className=\"col-sm-12\">\n            <div className=\"form-group\">\n              <label>Tài khoản&nbsp;</label>\n              <ErrorMessage\n                name=\"taiKhoan\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"taiKhoan\" type=\"text\" className=\"form-control\" />\n            </div>\n            <div className=\"form-group\">\n              <label>Mật khẩu&nbsp;</label>\n              <ErrorMessage\n                name=\"matKhau\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"matKhau\" type=\"password\" className=\"form-control\" />\n            </div>\n            <div className=\"form-group\">\n              <label>Họ và tên&nbsp;</label>\n              <ErrorMessage\n                name=\"hoTen\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"hoTen\" type=\"text\" className=\"form-control\" />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Email&nbsp;</label>\n              <ErrorMessage\n                name=\"email\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"email\" type=\"email\" className=\"form-control\" />\n            </div>\n            <div className=\"form-group\">\n              <label>Số điện thoại&nbsp;</label>\n              <ErrorMessage\n                name=\"soDt\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"soDt\" type=\"text\" className=\"form-control\" />\n            </div>\n            {/* <div className=\"form-group\">\n              <label>Loại tài khoản&nbsp;</label>\n              <div>\n                <label>\n                  <Field type=\"radio\" name=\"maLoaiNguoiDung\" value=\"KhachHang\" />\n                  Khách Hàng\n                </label>\n                <label>\n                  <Field type=\"radio\" name=\"maLoaiNguoiDung\" value=\"QuanTri\" />\n                  Quản Trị\n                </label>\n              </div>\n            </div> */}\n            <div className=\"text-center p-2\">\n              <button\n                type=\"submit\"\n                className=\"btn btn-success\"\n                disable={loadingRegister.toString()}\n              >\n                Đăng Ký\n              </button>\n              {/* error from api */}\n              {errorRegister && (\n                <div className=\"alert alert-danger\">\n                  <span>{errorRegister}</span>\n                </div>\n              )}\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </div>\n  );\n}\n"],"names":["Register","useSelector","state","authReducer","responseRegister","loadingRegister","errorRegister","location","useLocation","history","useHistory","dispatch","useDispatch","useEffect","Swal","position","icon","title","showConfirmButton","timer","push","resetErrorLoginRegister","signupUserSchema","yup","shape","taiKhoan","required","matKhau","email","soDt","matches","hoTen","className","style","padding","src","logoTix","alt","width","marginBottom","cursor","display","marginLeft","marginRight","textAlign","initialValues","maNhom","maLoaiNguoiDung","validationSchema","onSubmit","user","console","log","register","formikProps","name","render","msg","type","disable","toString"],"sourceRoot":""}