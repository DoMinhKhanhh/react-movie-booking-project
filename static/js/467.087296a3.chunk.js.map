{"version":3,"file":"static/js/467.087296a3.chunk.js","mappings":"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","sources":["pages/Login/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as yup from \"yup\";\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport { useTheme } from \"@material-ui/core/styles\";\n\nimport logoTix from \"../Register/logo/logoTix.png\";\nimport { login, resetErrorLoginRegister } from \"../../reducers/actions/Auth\";\nimport { LOADING_BACKTO_HOME } from \"../../reducers/constants/Lazy\";\n\nconst useStyles = makeStyles((theme) => ({\n  eye: {\n    position: \"absolute\",\n    top: 32,\n    right: 9,\n    cursor: \"pointer\",\n    color: \"#000\",\n  },\n  logoTix: {\n    width: \"209px\",\n    marginBottom: \"13px\",\n    cursor: \"pointer\",\n    display: \"block\",\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n  },\n  text: {\n    textAlign: \"center\",\n    marginBottom: \"30px\",\n  },\n}));\nexport default function Login() {\n  const { currentUser, errorLogin } = useSelector((state) => state.authReducer);\n  let location = useLocation();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [typePassword, settypePassword] = useState(\"password\");\n  const classes = useStyles();\n  const theme = useTheme();\n  const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n  useEffect(() => {\n    // đăng nhập thành công thì quay về trang trước đó\n    if (currentUser) {\n      if (location.state === \"/\") {\n        // nếu trang trước đó là \"/\" thì phải hiện loading do trang home mất nhiều thời gian tải\n        dispatch({ type: LOADING_BACKTO_HOME });\n        setTimeout(() => {\n          history.push(\"/\");\n        }, 50);\n        return undefined;\n      }\n      history.push(location.state);\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    return () => {\n      dispatch(resetErrorLoginRegister());\n    };\n  }, []);\n\n  const signinUserSchema = yup.object().shape({\n    taiKhoan: yup.string().required(\"*Tài khoản không được bỏ trống !\"),\n    matKhau: yup.string().required(\"*Mật khẩu không được bỏ trống !\"),\n  });\n\n  const handleSubmit = (user) => {\n    dispatch(login(user));\n  };\n  const handleDangKy = () => {\n    history.push(\"/dangky\", location.state);\n  };\n\n  const handleHold = () => {\n    if (!isDesktop) {\n      return;\n    }\n    settypePassword(\"text\");\n  };\n  const handleRelease = () => {\n    if (!isDesktop) {\n      return;\n    }\n    settypePassword(\"password\");\n  };\n  const handleShowPassword = () => {\n    if (isDesktop) {\n      return;\n    }\n    if (typePassword === \"password\") {\n      settypePassword(\"text\");\n    } else {\n      settypePassword(\"password\");\n    }\n  };\n\n  return (\n    <div className=\"text-light\" style={{ padding: \"60px 32px 30px\" }}>\n      <div className=\"container\">\n        <img src={logoTix} alt=\"logoTix\" className={classes.logoTix} />\n        <p className={classes.text}>\n          Đăng nhập để được nhiều ưu đãi, mua vé và bảo mật thông tin!\n        </p>\n      </div>\n      <div>\n        <Formik\n          initialValues={{\n            taiKhoan: \"\",\n            matKhau: \"\",\n          }}\n          validationSchema={signinUserSchema}\n          onSubmit={handleSubmit}\n        >\n          {() => (\n            <Form className=\"col-sm-10 mx-auto\">\n              <div className=\"form-group position-relative\">\n                <label>Tài khoản&nbsp;</label>\n                <ErrorMessage\n                  name=\"taiKhoan\"\n                  render={(msg) => <small className=\"text-danger\">{msg}</small>}\n                />\n                <Field type=\"text\" className=\"form-control\" name=\"taiKhoan\" />\n              </div>\n\n              <div className=\"form-group position-relative\">\n                <label>Mật khẩu&nbsp;</label>\n                <ErrorMessage\n                  name=\"matKhau\"\n                  render={(msg) => <small className=\"text-danger\">{msg}</small>}\n                />\n                <Field\n                  type={typePassword}\n                  className=\"form-control\"\n                  name=\"matKhau\"\n                />\n                <div\n                  className={classes.eye}\n                  onMouseDown={handleHold}\n                  onMouseUp={handleRelease}\n                  onClick={handleShowPassword}\n                >\n                  {typePassword === \"password\" ? (\n                    <i\n                      className={isDesktop ? \"fa fa-eye-slash\" : \"fa fa-eye\"}\n                    ></i>\n                  ) : (\n                    <i\n                      className={isDesktop ? \"fa fa-eye\" : \"fa fa-eye-slash\"}\n                    ></i>\n                  )}\n                </div>\n              </div>\n              <p\n                className=\"text-success\"\n                style={{ cursor: \"pointer\" }}\n                onClick={handleDangKy}\n              >\n                * Đăng ký\n              </p>\n              <button\n                style={{\n                  backgroundColor: \"#3E63b6\",\n                  borderColor: \"#3E63b6\",\n                  cursor: \"pointer\",\n                }}\n                disable={errorLogin?.toString()}\n                type=\"submit\"\n                className=\"btn btn-success mt-3 container\"\n              >\n                Đăng nhập\n              </button>\n              {/* error from api */}\n              {errorLogin && (\n                <div className=\"alert alert-danger\">\n                  <span> {errorLogin}</span>\n                </div>\n              )}\n            </Form>\n          )}\n        </Formik>\n      </div>\n    </div>\n  );\n}\n"],"names":["useStyles","makeStyles","theme","eye","position","top","right","cursor","color","logoTix","width","marginBottom","display","marginLeft","marginRight","text","textAlign","Login","useSelector","state","authReducer","currentUser","errorLogin","location","useLocation","dispatch","useDispatch","history","useHistory","useState","typePassword","settypePassword","classes","useTheme","isDesktop","useMediaQuery","breakpoints","up","useEffect","type","LOADING_BACKTO_HOME","setTimeout","push","resetErrorLoginRegister","signinUserSchema","yup","shape","taiKhoan","required","matKhau","handleDangKy","handleHold","handleRelease","handleShowPassword","className","style","padding","src","alt","initialValues","validationSchema","onSubmit","user","login","name","render","msg","onMouseDown","onMouseUp","onClick","backgroundColor","borderColor","disable","toString"],"sourceRoot":""}